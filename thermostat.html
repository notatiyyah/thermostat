<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Thermostat</title>
    <script src="src/Thermostat.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <script>
    $(document).ready(function(){

      function update_power_saving() {
        if (thermostat.isPowerSavingOn() === true) { $('#power_indicator').css('background-color', 'green'); }
        else  {$('#power_indicator').css('background-color', 'red'); }
        // sets indicator to red if power saving off and green if on
      }

      function update_temp(){
        $("#temp_view").val(thermostat.temp())
        $("#temp").html(thermostat.temp())
        // Sets display temp to the temperature from the thermostat object
      }

      function update_usage(){
        switch (thermostat.usage()){
          case "low-usage":
          $('#usage_indicator').css('background-color', 'green');
            break;
          case "medium-usage":
            $('#usage_indicator').css('background-color', 'orange');
            break;
          case "high-usage":
            $('#usage_indicator').css('background-color', 'red');
            break;
        };
      }

      // ON LOAD :
      var thermostat = new Thermostat();
      // Created thermostat object to use
      update_temp();
      update_power_saving();
      update_usage();
    
      // BUTTON FUNCTIONS
      $("#ps_on").click(function(){
        thermostat.turnOnPowerSaving();
        update_power_saving();
      });
      
      $("#ps_off").click(function(){
        thermostat.turnOffPowerSaving();
        update_power_saving();
      });

      $("#temp_up").click(function(){
        thermostat.increaseBy(1);
        update_temp();
        update_usage();
      });

      $("#temp_down").click(function(){
        thermostat.decreaseBy(1);
        update_usage();
        update_temp();
      });

      $("#reset").click(function(){
        thermostat.reset();
        update_temp();
      });

    });

  </script>
  <body>
    <h1>Thermostat</h1>
    
    <label for="temp_view">Current temperature: <span id="temp"></span>Â°C</label>
    <br/>
    <meter id="temp_view"
          min="10" max="32"
          low="18" high="26" optimum="20"
          value="20">
    </meter>
    <br/>
    <label for="power_indicator">Power Saving mode: </label>
    <div id="power_indicator" style="position: inline-relative; width: 50px; height: 50px; background-color: white; border: 1px solid #dddddd;"></div>
    <label for="usage_indicator">Usage: </label>
    <div id="usage_indicator" style="position: inline-relative; width: 50px; height: 50px; background-color: white; border: 1px solid #dddddd;"></div>
    <button id="ps_on">Turn On Power Saving</button>
    <button id="temp_up">Increase Temperature</button>
    <button id="temp_down">Decrease Temperature</button>
    <button id="reset">Reset</button>
  </body>
</html>
