<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Thermostat</title>
    <script src="src/Thermostat.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="src/style.css"></link>
  </head>
  <script>
    $(document).ready(function(){

      function updatePowerSaving() {
        $("#power_indicator").css("background-color", `${thermostat.isPowerSavingOn() ? "green" : "red" }` ); 
        // sets indicator to red if power saving off and green if on
      }

      function updateTemp(){
        $("#temp_view").val(thermostat.temp())
        $("#temp").html(thermostat.temp())
        // Sets display temp to the temperature from the thermostat object
      }

      function updateUsage(){
        var colour = ""
        switch (thermostat.usage()){
          case "low-usage":
            colour = "green"
            break;
          case "medium-usage":
            colour = "orange";
            break;
          case "high-usage":
            colour = "red";
            break;
        };
        $("#usage_indicator").css("background-color", `${colour}`);
      }

      function updateAll() {
        updateTemp();
        updatePowerSaving();
        updateUsage();
      };

      // ON LOAD :
      var thermostat = new Thermostat();
      // Created thermostat object to use
      updateAll();
    
      // BUTTON FUNCTIONS

      $("#ps").click(function(){
        thermostat.togglePowerSaving();
      });

      $("#up.temp").click(function(){
        thermostat.increaseBy(1);
      });

      $("#down.temp").click(function(){
        thermostat.decreaseBy(1);
      });

      $("#reset").click(function(){
        thermostat.reset();
      });

      $(":button").click(function(){ updateAll(); });
      // Update all after any button is pressed

    });

  </script>
  <body>
    <h1>Thermostat</h1>
    
    <label for="temp_view">Current temperature: <span id="temp"></span>Â°C</label>
    <br/>
    <meter id="temp_view"
          min="10" max="32"
          low="18" high="26" optimum="20"
          value="20">
    </meter>
    <br/>
    <label for="power_indicator">Power Saving mode: </label>
    <div class="led" id="power_indicator"></div>
    <label for="usage_indicator">Usage:</label>
    <div class="led" id="usage_indicator"></div>
    <div id="buttons">
      <button id="ps">Power Saving</button>
      <button class="temp" id="up">+</button>
      <button class= "temp" id="down">-</button>
      <button id="reset">Reset</button>
    </div>
  </body>
</html>
